<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>FishyLife</title>
<style>
body{margin:0;font-family:Arial;background:#4db8ff;color:white;}
header{display:flex;justify-content:space-around;padding:12px;background:rgba(0,0,0,.35);}
header a{color:white;text-decoration:none;font-size:18px;}
.card{background:rgba(0,0,0,.45);width:360px;margin:20px auto;padding:20px;border-radius:14px;}
button{padding:6px 12px;border:none;border-radius:6px;font-weight:bold;cursor:pointer;}
.fish-row{display:flex;justify-content:space-between;margin:4px 0;}
</style>
</head>
<body>

<header>
<a href="index.html">ğŸ  Home</a>
<a href="fish.html">ğŸ£ Fish</a>
<a href="shop.html">ğŸ›’ Shop</a>
</header>

<h1 style="text-align:center;">ğŸŸ FishyLife</h1>

<div class="card">
<p>â­ Level: <span id="level"></span></p>
<p>ğŸ§ª XP: <span id="xp"></span>/<span id="xpNeed"></span></p>
<p>ğŸ’° Money: $<span id="money"></span></p>
<p>ğŸª± Bait: <span id="bait"></span></p>
</div>

<div class="card">
<h3>ğŸ§­ Quest</h3>
<p id="questText"></p>
<p><b>Reward:</b> <span id="questReward"></span></p>
</div>

<div class="card">
<h3>ğŸ’ Inventory</h3>
<div id="inv"></div>
</div>

<script>
let g=JSON.parse(localStorage.getItem("game"));
if(!g){
    g={
        level:1,xp:0,xpNeed:50,money:50,bait:5,
        inventory:{},caught:{},
        quest:null
    };
}

/* ===== QUEST SYSTEM ===== */
const quests=[
()=>({text:"Catch 3 fish",type:"catch",goal:3,reward:{money:100,xp:20}}),
()=>({text:"Catch a Rare or better fish",type:"rare",goal:1,reward:{bait:5,xp:30}}),
()=>({text:"Earn $300",type:"money",goal:300,reward:{money:150}})
];

function newQuest(){
    g.quest=quests[Math.floor(Math.random()*quests.length)]();
    g.quest.progress=0;
}

if(!g.quest) newQuest();

function updateQuest(){
    questText.textContent=`${g.quest.text} (${g.quest.progress}/${g.quest.goal})`;
    questReward.textContent=JSON.stringify(g.quest.reward);
}

function checkQuest(){
    if(g.quest.progress>=g.quest.goal){
        Object.entries(g.quest.reward).forEach(([k,v])=>g[k]+=v);
        alert("Quest completed!");
        newQuest();
    }
}

/* ===== INVENTORY ===== */
function renderInv(){
    inv.innerHTML="";
    for(let f in g.inventory){
        const r=document.createElement("div");
        r.className="fish-row";
        r.innerHTML=`<span>${f} x${g.inventory[f]}</span>`;
        const b=document.createElement("button");
        b.textContent="Sell";
        b.onclick=()=>{
            g.inventory[f]--;
            g.money+=20;
            if(g.inventory[f]<=0) delete g.inventory[f];
            save();
        };
        r.appendChild(b);
        inv.appendChild(r);
    }
}

function update(){
    level.textContent=g.level;
    xp.textContent=g.xp;
    xpNeed.textContent=g.xpNeed;
    money.textContent=g.money;
    bait.textContent=g.bait;
    renderInv();
    updateQuest();
}

function save(){
    while(g.xp>=g.xpNeed){
        g.xp-=g.xpNeed;
        g.level++;
        g.xpNeed=Math.floor(g.xpNeed*1.5);
    }
    localStorage.setItem("game",JSON.stringify(g));
    update();
}

update();
</script>
</body>
</html>
