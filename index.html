<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>FishyLife</title>
<style>
body{margin:0;font-family:Arial;background:#4db8ff;color:white;}
header{display:flex;justify-content:space-around;padding:12px;background:rgba(0,0,0,.35);}
header a{color:white;text-decoration:none;font-size:18px;}
header a.disabled{opacity:.4;pointer-events:none;}
h1{text-align:center;}
.card{
    background:rgba(0,0,0,.35);
    width:360px;
    margin:20px auto;
    padding:20px;
    border-radius:14px;
}
button{padding:8px 14px;border:none;border-radius:8px;font-weight:bold;margin:2px;cursor:pointer;}
select{padding:6px;border-radius:6px;}
#encyclopedia,#inventory,#customBaitCard{display:none;}
.fish-card{background:rgba(255,255,255,.15);padding:6px;border-radius:6px;margin:4px 0;display:flex;justify-content:space-between;align-items:center;}
input[type=text]{padding:4px;border-radius:6px;border:none;width:200px;margin-right:4px;}
</style>
</head>
<body>

<header>
<a href="index.html">ğŸ  Home</a>
<a id="fishBtn" href="fish.html">ğŸ£ Fish</a>
<a href="shop.html">ğŸ›’ Shop</a>
<a href="#" onclick="toggle('inventory')">ğŸ’ Bag</a>
<a href="#" onclick="toggle('encyclopedia')">ğŸ“– Book</a>
</header>

<h1>ğŸŸ FishyLife</h1>

<div class="card">
<p>â­ Level: <span id="level"></span></p>
<p>ğŸ§ª XP: <span id="xp"></span>/<span id="xpNeed"></span></p>
<p>ğŸ’° Money: $<span id="money"></span></p>
<p>ğŸª± Bait: <span id="bait"></span></p>

<p>ğŸŒ Location:
<select id="location" onchange="changeLocation()">
<option value="Creek">Creek</option>
<option value="Lake">Lake</option>
<option value="Ocean">Ocean</option>
</select>
<button onclick="unlockLocation()">Unlock</button>
</p>
</div>

<!-- CUSTOM BAIT -->
<div class="card" id="customBaitCard">
  <h2>ğŸª± Create Custom Bait</h2>
  <p>Select fish to craft bait:</p>
  <select id="customBaitSelect">
    <option value="Salmon">Salmon</option>
    <option value="Tilapia">Tilapia</option>
    <option value="Clownfish">Clownfish</option>
    <option value="Goldfish">Goldfish</option>
    <option value="Kepper">Kepper</option>
  </select>
  <button onclick="craftBait()">Craft Bait</button>
</div>

<!-- INVENTORY -->
<div class="card" id="inventory">
<h2>ğŸ’ Inventory</h2>
<div id="invList"></div>
</div>

<!-- ENCYCLOPEDIA -->
<div class="card" id="encyclopedia">
<h2>ğŸ“– Encyclopedia</h2>
<div id="fishList"></div>
</div>

<!-- PROMO CODE -->
<div class="card">
<h2>ğŸ Enter Promo Code</h2>
<input type="text" id="promoCode" placeholder="Enter code">
<button onclick="redeemCode()">Redeem</button>
</div>

<script>
// GLOBAL VARIABLES
const fishData=[
{name:"Minnow",value:10},{name:"Bluegill",value:15},{name:"Bass",value:20},
{name:"Trout",value:25},{name:"Catfish",value:30},{name:"Salmon",value:40},
{name:"Peacock Bass",value:50},{name:"Red Snapper",value:45},{name:"Tilapia",value:35},
{name:"Clownfish",value:30},{name:"Moonfish",value:55},{name:"Tigershark",value:150},
{name:"Basa",value:40},{name:"Goldfish",value:20},{name:"Angelfish",value:22},
{name:"Turtle",value:35},{name:"Kepper",value:35},{name:"Crabs",value:15},
{name:"Crawfish",value:12},{name:"Mussels",value:10},{name:"Clams",value:10},
{name:"Lungfish",value:45},{name:"Squid",value:35},{name:"Lemonshark",value:120},
{name:"Abyssal Octopus",value:300}
];

const locationPrice={Lake:5000,Ocean:10000};
const customBaitFish=["Salmon","Tilapia","Clownfish","Goldfish","Kepper"];

let g;
function loadGame(){
    let saved=localStorage.getItem("game");
    if(!saved){
        g={level:1,xp:0,xpNeed:50,money:50,bait:5,rod:1,
           fishCount:0,location:"Creek",inventory:{},caught:{},unlocked:{Creek:true,Lake:false,Ocean:false},usedCodes:{}};
        localStorage.setItem("game",JSON.stringify(g));
    } else {
        g=JSON.parse(saved);
    }
    showStats();
    location.value=g.location;
    document.getElementById("fishBtn").classList.toggle("disabled",!g.unlocked[g.location]);
    checkCustomBaitUnlock();
}
loadGame();

// SHOW STATS
function showStats(){
    document.getElementById("level").textContent=g.level;
    document.getElementById("xp").textContent=g.xp;
    document.getElementById("xpNeed").textContent=g.xpNeed;
    document.getElementById("money").textContent=g.money;
    document.getElementById("bait").textContent=g.bait;
}

// TOGGLE CARDS
function toggle(id){
    const e=document.getElementById(id);
    if(!e) return;
    if(e.style.display==="block") e.style.display="none";
    else {
        e.style.display="block";
        if(id==="inventory") renderInventory();
        if(id==="encyclopedia") renderFish();
    }
}

// INVENTORY
function renderInventory(){
    const invList=document.getElementById("invList");
    if(!invList) return;
    invList.innerHTML="";
    for(let f in g.inventory){
        const div=document.createElement("div");
        div.className="fish-card";
        const nameSpan=document.createElement("span");
        nameSpan.textContent=`${f} x${g.inventory[f]}`;
        const sellBtn=document.createElement("button");
        sellBtn.textContent="Sell";
        sellBtn.onclick=()=>{
            if(g.inventory[f]>0){
                const fishVal = fishData.find(x=>x.name===f)?.value || 10;
                g.inventory[f]--;
                g.money+=fishVal;
                if(g.inventory[f]<=0) delete g.inventory[f];
                localStorage.setItem("game",JSON.stringify(g));
                renderInventory();
                showStats();
            }
        };
        div.appendChild(nameSpan);
        div.appendChild(sellBtn);
        invList.appendChild(div);
    }
}

// ENCYCLOPEDIA
function renderFish(){
    const fishList=document.getElementById("fishList");
    if(!fishList) return;
    fishList.innerHTML="";
    fishData.forEach(f=>{
        const d=document.createElement("div");
        d.className="fish-card";
        d.textContent=(g.caught[f.name]?"âœ… ":"âŒ ")+f.name;
        fishList.appendChild(d);
    });
}

// LOCATION
function changeLocation(){
    const loc=location.value;
    if(!g.unlocked[loc]){
        alert("Location locked! Unlock it first.");
        location.value=g.location;
        return;
    }
    g.location=loc;
    localStorage.setItem("game",JSON.stringify(g));
    document.getElementById("fishBtn").classList.remove("disabled");
}

function unlockLocation(){
    const loc=location.value;
    if(g.unlocked[loc]){
        alert("Already unlocked!");
        return;
    }
    const price=locationPrice[loc]||0;
    if(g.money<price){
        alert("Not enough money to unlock!");
        return;
    }
    g.money-=price;
    g.unlocked[loc]=true;
    localStorage.setItem("game",JSON.stringify(g));
    showStats();
    alert(loc+" unlocked!");
    document.getElementById("fishBtn").classList.remove("disabled");
}

// CUSTOM BAIT
function checkCustomBaitUnlock(){
    const card = document.getElementById("customBaitCard");
    card.style.display = g.level>=15 ? "block" : "none";
}

function craftBait(){
    const fish = document.getElementById("customBaitSelect").value;
    if(!g.inventory[fish] || g.inventory[fish]<=0) return alert("You don't have that fish to craft bait!");
    g.inventory[fish]--;
    g.bait = (g.bait || 0) + 1;
    if(g.inventory[fish]<=0) delete g.inventory[fish];
    localStorage.setItem("game", JSON.stringify(g));
    showStats();
    renderInventory();
    alert("âœ… Custom bait created from " + fish + "!");
}

// PROMO CODES
function redeemCode(){
    const code=document.getElementById("promoCode").value;
    if(!code) return;
    if(g.usedCodes[code]) return alert("You already used this code!");
    if(code==="V7a93bXt34"){ // $500, 10 bait, lv 5
        g.money+=500;
        g.bait+=10;
        g.xp+=200; // enough for lv5
    } else if(code==="OvErXoWnEr010aay"){ // admin bundle
        g.money+=10000;
        g.bait+=100;
        g.xp+=20000; // enough for lv40
    } else if(code==="T9zxPrN4GF"){ // $300, 5 bait, lv5
        g.money+=300;
        g.bait+=5;
        g.xp+=200;
    } else { return alert("Invalid code!"); }
    // Level up if needed
    while(g.xp>=g.xpNeed){
        g.xp-=g.xpNeed;
        g.level++;
        g.xpNeed = Math.floor(g.xpNeed*1.5);
    }
    g.usedCodes[code]=true;
    localStorage.setItem("game",JSON.stringify(g));
    showStats();
    checkCustomBaitUnlock();
    renderInventory();
    alert("ğŸ‰ Code applied!");
}
</script>
</body>
</html>
